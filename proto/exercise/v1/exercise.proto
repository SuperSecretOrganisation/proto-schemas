syntax = "proto3";

package proto.exercise.v1;

option go_package = "github.com/supersecretorganisation/proto-schemas/v2/gen/go/proto/exercise/v1;exercisepb";

service ExerciseService {
  rpc CreateExercise (CreateExerciseRequest) returns (CreateExerciseResponse);
  rpc GetExercise (GetExerciseRequest) returns (GetExerciseResponse);
  rpc UpdateExercise (UpdateExerciseRequest) returns (UpdateExerciseResponse);
  rpc DeleteExercise (DeleteExerciseRequest) returns (DeleteExerciseResponse);
  rpc ListExercises (ListExercisesRequest) returns (ListExercisesResponse);
  rpc SearchExercises (SearchExercisesRequest) returns (SearchExercisesResponse);
}

// Exercise message definition
message Exercise {
  string id = 1;                    // UUID
  string name = 2;                  // Exercise name
  string description = 3;           // Description
  string category = 4;              // strength, cardio, flexibility, balance, sports
  repeated string primary_muscles = 5;  // chest, back, shoulders, legs, arms, core
  repeated string secondary_muscles = 6; // Secondary muscle groups
  string difficulty_level = 7;      // beginner, intermediate, advanced
  repeated string equipment_needed = 8;  // barbell, dumbbell, machine, bodyweight, etc.
  string instructions = 9;          // How to perform the exercise
  string video_url = 10;            // URL to demonstration video (optional)
  bool is_custom = 11;              // Whether this is a user-created exercise
  string user_id = 12;              // ID of user who created (if custom)
  string created_at = 13;           // RFC3339 format
  string updated_at = 14;           // RFC3339 format
}

// Create exercise request and response
message CreateExerciseRequest {
  string name = 1;
  string description = 2;
  string category = 3;
  repeated string primary_muscles = 4;
  repeated string secondary_muscles = 5;
  string difficulty_level = 6;
  repeated string equipment_needed = 7;
  string instructions = 8;
  string video_url = 9;
  bool is_custom = 10;
}
message CreateExerciseResponse {
  Exercise exercise = 1;
}

// Get exercise request and response
message GetExerciseRequest {
  string id = 1;
}
message GetExerciseResponse {
  Exercise exercise = 1;
}

// Update exercise request and response
message UpdateExerciseRequest {
  string id = 1;
  string name = 2;
  string description = 3;
  string category = 4;
  repeated string primary_muscles = 5;
  repeated string secondary_muscles = 6;
  string difficulty_level = 7;
  repeated string equipment_needed = 8;
  string instructions = 9;
  string video_url = 10;
}
message UpdateExerciseResponse {
  Exercise exercise = 1;
}

// Delete exercise request and response
message DeleteExerciseRequest {
  string id = 1;
}
message DeleteExerciseResponse {
  bool success = 1;
}

// List exercises request and response
message ListExercisesRequest {
  int32 page = 1;
  int32 page_size = 2;
  string category = 3;              // Optional filter by category
  string difficulty_level = 4;      // Optional filter by difficulty
  bool custom_only = 5;             // Optional: only return custom exercises
}
message ListExercisesResponse {
  repeated Exercise exercises = 1;
  int32 total_count = 2;
}

// Search exercises request and response
message SearchExercisesRequest {
  string query = 1;                 // Search in name, description
  repeated string muscle_groups = 2; // Filter by muscle groups
  repeated string equipment = 3;     // Filter by equipment
  string difficulty_level = 4;       // Filter by difficulty
  int32 page = 5;
  int32 page_size = 6;
}
message SearchExercisesResponse {
  repeated Exercise exercises = 1;
  int32 total_count = 2;
}
